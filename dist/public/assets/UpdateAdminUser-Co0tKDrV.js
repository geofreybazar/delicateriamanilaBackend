import{u as w,a as T,k as z,b as W,i as E,U as B,l as P,m as k,p as C,j as a,T as s,C as F,M as c,B as M}from"./index-vQs_jjn0.js";import{u as q}from"./useGetUser-BLI6tCo6.js";const Q=()=>{const{mutateAsync:i,isPending:m,isError:n,error:e,isSuccess:o}=w({mutationFn:T.updateAdminUser});return{updateAdminUser:i,isPending:m,isError:n,error:e,isSuccess:o}},G=()=>{var x,h,p,f,g;const i=z(),m=W(),{id:n}=E(),{user:e}=q(n||""),o=B(t=>t.setOpenSnackBar),{register:l,handleSubmit:v,setError:N,control:S,formState:{errors:r}}=P({resolver:k(C),defaultValues:{firstname:(e==null?void 0:e.firstname)||"",middlename:(e==null?void 0:e.middlename)||"",lastname:(e==null?void 0:e.lastname)||"",email:(e==null?void 0:e.email)||"",phoneNumber:(e==null?void 0:e.phoneNumber)||"",role:(e==null?void 0:e.role)||"admin"}}),{updateAdminUser:U,isPending:u}=Q(),y=async t=>{var b,j;const d={...t,id:e==null?void 0:e.id};try{await U(d),await i.invalidateQueries({queryKey:["adminusers"],exact:!1}),await i.invalidateQueries({queryKey:["user",n]}),o(!0),m("/staffmanagement")}catch(A){N("root",{message:((j=(b=A.response)==null?void 0:b.data)==null?void 0:j.error)||"An unexpected error occurred"})}};return a.jsx("div",{className:"w-full p-6",children:a.jsx("div",{className:"w-full p-5 border border-gray-200 max-w-2xl shadow-lg rounded-2xl",children:a.jsxs("form",{onSubmit:v(y),className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(s,{label:"First Name",size:"small",fullWidth:!0,...l("firstname"),error:!!r.firstname,helperText:(x=r.firstname)==null?void 0:x.message}),a.jsx(s,{label:"Middle Name",size:"small",fullWidth:!0,...l("middlename"),error:!!r.middlename,helperText:(h=r.middlename)==null?void 0:h.message}),a.jsx(s,{label:"Last Name",size:"small",fullWidth:!0,...l("lastname"),error:!!r.lastname,helperText:(p=r.lastname)==null?void 0:p.message})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(s,{label:"Email Address",size:"small",fullWidth:!0,...l("email"),error:!!r.email,helperText:(f=r.email)==null?void 0:f.message}),a.jsx(s,{label:"Phone Number",size:"small",fullWidth:!0,...l("phoneNumber"),error:!!r.phoneNumber,helperText:(g=r.phoneNumber)==null?void 0:g.message})]}),a.jsx(F,{name:"role",control:S,render:({field:t})=>{var d;return a.jsxs(s,{...t,label:"Role",size:"small",fullWidth:!0,select:!0,error:!!r.role,helperText:(d=r.role)==null?void 0:d.message,children:[a.jsx(c,{value:"admin",children:"Admin"}),a.jsx(c,{value:"staff",children:"Staff"}),a.jsx(c,{value:"rider",children:"Delivery Rider"})]})}}),a.jsx(M,{fullWidth:!0,type:"submit",variant:"contained",color:"customorange",size:"medium",loading:u,disabled:u,children:"Save Personnel"}),r.root&&a.jsx("div",{className:"text-center text-red-600 ",children:r.root.message})]})})})};export{G as default};
