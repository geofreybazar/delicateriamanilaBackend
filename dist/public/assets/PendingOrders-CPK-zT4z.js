const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ViewOrder-Dfxt7iCV.js","assets/index-BwDYrgBi.js","assets/index-zMuzzzx4.css"])))=>i.map(i=>d[i]);
import{g as b,aC as p,j as e,t as P,v,w as f,x as m,y as x,z as d,D as S,F as C,u as N,k as T,E,s as _,r as c,B as A,_ as q,a_ as L,G as R}from"./index-BwDYrgBi.js";import{L as V}from"./LoadingOrder-c8jTzEJG.js";const k=(s,n)=>{const{data:t,isLoading:i,isError:a,error:o}=b({queryKey:["pendingorders",s,n],queryFn:()=>p.getPendingOrders(s,n)});return{pendingOrders:t,isLoading:i,isError:a,error:o}},F=({pendingOrders:s,handleViewOrder:n,rowsPerPage:t,page:i,handleChangePage:a,handleChangeRowsPerPage:o})=>{var l;return e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"border border-gray-300 rounded-lg shadow-md",children:e.jsxs(v,{size:"small",sx:{tableLayout:"fixed",width:"100%"},children:[e.jsx(f,{children:e.jsx(m,{children:x.orderTableHeads.map((r,u)=>e.jsx(d,{style:x.paymentTableHeadStyle,children:r.label},u))})}),e.jsx(S,{children:(l=s.orders)==null?void 0:l.map(r=>e.jsxs(m,{onClick:()=>n(r.id),className:"cursor-pointer transition duration-200 ease-in-out hover:bg-gray-100",children:[e.jsx(d,{sx:{width:"14%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:r.referenceNumber}),e.jsx(d,{sx:{width:"14%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:r.clientUserId?"Registered User":"Guest User"}),e.jsx(d,{style:{width:"16%"},children:r.customerDetails.name}),e.jsx(d,{style:{width:"16%"},children:r.customerDetails.email}),e.jsx(d,{style:{width:"8%"},children:r.netAmount.toLocaleString("en-PH",{style:"currency",currency:"PHP"})}),e.jsx(d,{style:{color:r.orderStatus==="completed"?"green":"red",fontWeight:"bold",width:"8%"},children:r.orderStatus}),e.jsx(d,{style:{width:"12%"},children:new Date(r.createdAt).toLocaleString("en-PH",{dateStyle:"medium",timeStyle:"short"})})]},r.id))})]})}),e.jsx(C,{rowsPerPageOptions:[5,10,25],component:"div",count:s.totalItems,rowsPerPage:t,page:i,onPageChange:a,onRowsPerPageChange:o})]})},H=()=>{const{mutateAsync:s,isPending:n,isError:t,error:i,isSuccess:a}=N({mutationFn:p.acceptOrder});return{acceptOrder:s,isPending:n,isError:t,error:i,isSuccess:a}},Q=c.lazy(()=>q(()=>import("./ViewOrder-Dfxt7iCV.js"),__vite__mapDeps([0,1,2]))),D=({orderId:s,handleCloseViewOrder:n})=>{const t=T(),{acceptOrder:i,isPending:a,isError:o,error:l}=H();if(!s)return e.jsx("div",{children:"No order id found!"});const r=async()=>{await i(s),await t.invalidateQueries({queryKey:["order",s]}),await t.invalidateQueries({queryKey:["pendingorders"],exact:!1}),await t.invalidateQueries({queryKey:["totalnumberorders"]}),await t.invalidateQueries({queryKey:["acceptedOrders"],exact:!1}),n()};return e.jsx("div",{children:e.jsx(E,{FallbackComponent:_,children:e.jsx(c.Suspense,{fallback:e.jsx(V,{}),children:e.jsxs(Q,{orderId:s,children:[e.jsx(A,{fullWidth:!0,variant:"contained",color:"customblue",onClick:()=>r(),loading:a,disabled:a,children:"Accept Order"}),o&&l&&e.jsx("p",{className:"text-red-500",children:"Something went wrong, try again or contact the developer"})]})})})})},K=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center",children:[e.jsx(L,{size:48,className:"text-gray-400 mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No Pending Orders"}),e.jsx("p",{className:"text-gray-500 max-w-sm mb-6",children:"You have no orders waiting for approval or processing at the moment."})]}),M=()=>{const[s,n]=c.useState(0),[t,i]=c.useState(5),[a,o]=c.useState(""),[l,r]=c.useState(!1),u=()=>{r(!1),o("")},y=(h,O)=>{n(O)},w=h=>{i(parseInt(h.target.value,10)),n(0)},{pendingOrders:g}=k(s,t),j=h=>{o(h),r(!0)};return e.jsxs("div",{children:[g.orders.length===0?e.jsx(K,{}):e.jsx(F,{pendingOrders:g,handleViewOrder:j,rowsPerPage:t,page:s,handleChangePage:y,handleChangeRowsPerPage:w}),e.jsx(R,{open:l,onClose:u,style:x.viewOrderModalStyle,children:e.jsx(D,{orderId:a,handleCloseViewOrder:u})})]})};export{M as default};
