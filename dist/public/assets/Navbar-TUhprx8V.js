import{u as l,a as d,b as m,c as g,j as e,N as x,A as p,d as h,r as c,e as f,f as j}from"./index-BwDYrgBi.js";import{F as v,a as w}from"./index-BKpXDgVC.js";const N=()=>{const{mutateAsync:o,isPending:r,isError:n,error:a,isSuccess:s}=l({mutationFn:d.logout});return{logout:o,isPending:r,isError:n,error:a,isSuccess:s}},b=({closeMenu:o})=>{var u;const r=m(),n=g(),{logout:a,isPending:s,error:t}=N(),i=async()=>{await a(),n(h.logout()),r("/login")};return e.jsxs("div",{className:"bg-customOrange absolute right-4 mt-2 rounded-xl w-60 py-2 px-5 shadow-md z-10",children:[e.jsx(x,{to:"/accountsettings",onClick:o,className:`hover:bg-lightCustomOrange w-full flex justify-start rounded-md px-2 ${s?"cursor-not-allowed":"cursor-pointer"}`,children:"Account Settings"}),e.jsx("button",{className:`hover:bg-lightCustomOrange w-full flex justify-start rounded-md px-2 ${s?"cursor-not-allowed":"cursor-pointer"}`,onClick:i,disabled:s,children:s?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin",children:e.jsx(v,{})}),e.jsx("p",{children:"Loging-out"})]}):e.jsx("p",{children:"Logout"})}),t instanceof p&&t.response?e.jsx("p",{className:"text-center capitalize text-red-500",children:((u=t.response.data)==null?void 0:u.error)||"An error occurred"}):t&&e.jsx("p",{className:"text-center capitalize text-red-500",children:"Something went wrong"})]})},L=()=>{const[o,r]=c.useState(!1),n=c.useRef(null);if(!f(t=>t.user.user))return e.jsx("div",{children:"UserId not found!"});const{loggedInUser:s}=j();return c.useEffect(()=>{const t=i=>{n.current&&!n.current.contains(i.target)&&r(!1)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]),e.jsx("div",{className:"relative bg-ashBlack p-4 flex justify-end",children:e.jsxs("div",{ref:n,children:[e.jsxs("div",{className:"bg-customOrange hover:bg-darkCustomOrange py-2 px-4 cursor-pointer rounded-full text-black hover:text-offwhite flex items-center gap-5",onClick:()=>r(!o),children:[e.jsxs("p",{children:[s.firstname," ",s.middlename?s.middlename[0]:""," ",s.lastname," - ",s.role]}),e.jsx("p",{children:e.jsx(w,{})})]}),o&&e.jsx(b,{closeMenu:()=>r(!1)})]})})};export{L as default};
