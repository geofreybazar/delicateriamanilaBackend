import{g as h,a as p,u as R,aC as D,k as S,r as j,l as b,m as I,bj as q,j as s,T as m,M as w,B as Q}from"./index-BwDYrgBi.js";const A=()=>{const{data:i,isLoading:t,isError:r,error:a}=h({queryKey:["deliveryriders"],queryFn:()=>p.getDeliveryRiders()});return{deliveryRiders:i,isLoading:t,isError:r,error:a}},E=()=>{const{mutateAsync:i,isPending:t,isError:r,error:a,isSuccess:l}=R({mutationFn:D.assignDeliveryRider});return{assignDeliveryRider:i,isPending:t,isError:r,error:a,isSuccess:l}},K=({orderId:i,handleCloseViewOrder:t})=>{var u,c;const r=S(),{deliveryRiders:a}=A(),l=j.useMemo(()=>a.map(e=>({name:`${e.firstname} ${e==null?void 0:e.middlename} ${e.lastname}`,id:e.id})),[a]),{register:d,handleSubmit:y,formState:{errors:n}}=b({resolver:I(q)}),{assignDeliveryRider:v,isPending:o,isError:g,error:x}=E(),f=async e=>{await v(e),await r.invalidateQueries({queryKey:["order",i]}),await r.invalidateQueries({queryKey:["outForDeliveryOrders"],exact:!1}),await r.invalidateQueries({queryKey:["totalnumberorders"]}),await r.invalidateQueries({queryKey:["ongoingdelivery"],exact:!1}),t()};return s.jsxs("div",{className:"p-6 flex flex-col gap-4",children:["Select Delivery Rider",s.jsxs("form",{onSubmit:y(f),className:"flex flex-col gap-2",children:[s.jsx(m,{label:"Rider",size:"small",fullWidth:!0,defaultValue:"",select:!0,...d("riderId"),error:!!n.riderId,helperText:(u=n.riderId)==null?void 0:u.message,children:l.map(e=>s.jsx(w,{value:e.id,children:e.name},e.id))}),s.jsx(m,{label:"Order ID",size:"small",hidden:!0,defaultValue:i,...d("orderId"),error:!!n.orderId,helperText:(c=n.orderId)==null?void 0:c.message}),s.jsx(Q,{type:"submit",fullWidth:!0,variant:"contained",color:"customorange",loading:o,disabled:o,children:"Assign Delivery Rider"}),g&&x&&s.jsx("p",{className:"text-red-500",children:"Something went wrong, try again or contact the developer"})]})]})};export{K as default};
