import{j as e,az as O,B as o,u as A,a as y,k as S,r as h,G as f,y as p,as as j}from"./index-vQs_jjn0.js";import{u as E}from"./useGetUser-BLI6tCo6.js";const q=({user:s,handleOpenResetPasswordModal:t,handleOpenDeactivateAdminUserModal:n,handleOpenActivateAdminUserModal:a})=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 flex items-center justify-center rounded-full bg-blue-600 text-white text-2xl font-bold",children:s.firstname[0]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xl font-semibold text-gray-800 ",children:[s.firstname," ",s.middlename," ",s.lastname]}),e.jsx("p",{className:`${s.status==="active"?"bg-green-500 ":"bg-red-500 "} font-semibold w-fit px-3 py-1 rounded-full text-sm text-white`,children:s.status==="active"?"Active":"Deactivated"})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(O,{to:`updateadminuser/${s.id}`,children:e.jsx(o,{fullWidth:!0,size:"small",variant:"contained",children:"Edit User"})}),e.jsx(o,{fullWidth:!0,size:"small",variant:"contained",onClick:t,children:"Reset Password"}),s.status==="deactivated"?e.jsx(o,{fullWidth:!0,size:"small",color:"error",variant:"contained",onClick:a,children:"Activate User"}):e.jsx(o,{fullWidth:!0,size:"small",color:"error",variant:"contained",onClick:n,children:"Deactivate User"})]})]}),e.jsx("hr",{className:"mb-4"}),e.jsxs("div",{className:"space-y-2 text-gray-700",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Email:"})," ",s.email]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Phone:"})," ",s.phoneNumber]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Role:"})," ",s.role]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Created:"})," ",new Date(s.createdAt).toLocaleDateString()]})]})]}),z=()=>{const{mutateAsync:s,isPending:t,isError:n,error:a,isSuccess:i}=A({mutationFn:y.resetAdminUserPassword});return{resetAdminUserPassword:s,isPending:t,isError:n,error:a,isSuccess:i}},Q=({user:s,handleCloseResetPasswordModal:t,handleOpenResetPasswordSnackBar:n})=>{var x,r;const{resetAdminUserPassword:a,isPending:i,isError:l,error:d,isSuccess:c}=z(),m=async()=>{await a(s.id),t(),n()};return e.jsxs("div",{children:[e.jsxs("div",{className:"rounded-t-xl bg-ashBlack p-4 text-lg text-offwhite",children:["Reset ",s.firstname," ",s.middlename," ",s.lastname," password?"]}),e.jsxs("div",{className:"p-4 flex flex-col justify-between gap-5",children:[e.jsx("div",{className:"text-base",children:"This can't be undone."}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(o,{onClick:t,children:"Cancel"}),e.jsx(o,{variant:"contained",color:"error",onClick:m,loading:i,disabled:i||c,children:"Reset Password"})]}),l&&e.jsx("p",{className:"text-center text-red-500 text-lg",children:((r=(x=d==null?void 0:d.response)==null?void 0:x.data)==null?void 0:r.error)||"An unexpected error occurred"})]})]})},K=()=>{const{mutateAsync:s,isPending:t,isError:n,error:a,isSuccess:i}=A({mutationFn:y.deactivateAdminUser});return{deactivateAdminUser:s,isPending:t,isError:n,error:a,isSuccess:i}},W=({user:s,handleCloseDeactivateAdminUserModal:t,handleOpenDeactivateAdminUserSnackBar:n})=>{var r,u;const a=S(),{deactivateAdminUser:i,isPending:l,isError:d,error:c,isSuccess:m}=K(),x=async()=>{await i(s.id),await a.invalidateQueries({queryKey:["adminusers"],exact:!1}),await a.invalidateQueries({queryKey:["user",s.id]}),t(),n()};return e.jsxs("div",{children:[e.jsx("div",{className:"rounded-t-xl bg-ashBlack p-4 text-lg text-offwhite",children:"Deactivate account"}),e.jsxs("div",{className:"p-4 flex flex-col justify-between gap-5",children:[e.jsxs("div",{className:"text-base",children:["Are you sure to deactivate ",s.firstname," ",s.middlename," ",s.lastname,"'s account?"]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(o,{onClick:t,children:"Cancel"}),e.jsx(o,{variant:"contained",color:"error",onClick:x,loading:l,disabled:l||m,children:"Deactivate"})]}),d&&e.jsx("p",{className:"text-center text-red-500 text-lg",children:((u=(r=c==null?void 0:c.response)==null?void 0:r.data)==null?void 0:u.error)||"An unexpected error occurred"})]})]})},F=()=>{const{mutateAsync:s,isPending:t,isError:n,error:a,isSuccess:i}=A({mutationFn:y.activateAdminUser});return{activateAdminUser:s,isPending:t,isError:n,error:a,isSuccess:i}},G=({user:s,handleCloseActivateAdminUserModal:t,handleOpenActivateAdminUserSnackBar:n})=>{var r,u;const a=S(),{activateAdminUser:i,isPending:l,isError:d,error:c,isSuccess:m}=F(),x=async()=>{await i(s.id),await a.invalidateQueries({queryKey:["adminusers"],exact:!1}),await a.invalidateQueries({queryKey:["user",s.id]}),t(),n()};return e.jsxs("div",{children:[e.jsx("div",{className:"rounded-t-xl bg-ashBlack p-4 text-lg text-offwhite",children:"Activate account"}),e.jsxs("div",{className:"p-4 flex flex-col justify-between gap-5",children:[e.jsxs("div",{className:"text-base",children:["Are you sure to activate ",s.firstname," ",s.middlename," ",s.lastname,"'s account?"]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(o,{onClick:t,children:"Cancel"}),e.jsx(o,{variant:"contained",color:"error",onClick:x,loading:l,disabled:l||m,children:"Activate"})]}),d&&e.jsx("p",{className:"text-center text-red-500 text-lg",children:((u=(r=c==null?void 0:c.response)==null?void 0:r.data)==null?void 0:u.error)||"An unexpected error occurred"})]})]})},_=({clickedUser:s})=>{const{user:t}=E(s),[n,a]=h.useState(!1),[i,l]=h.useState(!1),d=()=>a(!1),c=()=>a(!0),m=()=>l(!0),[x,r]=h.useState(!1),[u,w]=h.useState(!1),U=()=>r(!1),k=()=>r(!0),P=()=>w(!0),[C,g]=h.useState(!1),[D,b]=h.useState(!1),N=()=>g(!1),R=()=>g(!0),B=()=>b(!0),v=(L,M)=>{M!=="clickaway"&&(l(!1),w(!1),b(!1))};return e.jsxs("div",{className:"p-6 w-full",children:[e.jsx(q,{user:t,handleOpenResetPasswordModal:c,handleOpenDeactivateAdminUserModal:k,handleOpenActivateAdminUserModal:R}),e.jsx(f,{open:n,onClose:d,style:p.styleResetUserPasswordModal,children:e.jsx(Q,{user:t,handleCloseResetPasswordModal:d,handleOpenResetPasswordSnackBar:m})}),e.jsx(f,{open:x,onClose:U,style:p.styleResetUserPasswordModal,children:e.jsx(W,{user:t,handleCloseDeactivateAdminUserModal:U,handleOpenDeactivateAdminUserSnackBar:P})}),e.jsx(f,{open:C,onClose:N,style:p.styleResetUserPasswordModal,children:e.jsx(G,{user:t,handleCloseActivateAdminUserModal:N,handleOpenActivateAdminUserSnackBar:B})}),e.jsx(j,{openState:i,closefunction:v,message:"User password has been reset successfully"}),e.jsx(j,{openState:u,closefunction:v,message:"User account has been deactivated successfully"}),e.jsx(j,{openState:D,closefunction:v,message:"User account has been activated successfully"})]})};export{_ as default};
