const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ViewOrder-Dfxt7iCV.js","assets/index-BwDYrgBi.js","assets/index-zMuzzzx4.css"])))=>i.map(i=>d[i]);
import{g as O,aC as v,j as e,t as b,v as f,w as k,x as w,y as g,z as c,D as S,F as D,u as P,k as R,E as C,s as E,r as u,B as j,_ as A,a_ as N,G as T}from"./index-BwDYrgBi.js";import{L as q}from"./LoadingOrder-c8jTzEJG.js";const _=(r,a)=>{const{data:s,isLoading:o,isError:i,error:l}=O({queryKey:["acceptedOrders",r,a],queryFn:()=>v.getAcceptedOrders(r,a)});return{acceptedOrders:s,isLoading:o,isError:i,error:l}},Q=({acceptedOrders:r,handleViewOrder:a,rowsPerPage:s,page:o,handleChangePage:i,handleChangeRowsPerPage:l})=>{var d;return e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"border border-gray-300 rounded-lg shadow-md",children:e.jsxs(f,{size:"small",sx:{tableLayout:"fixed",width:"100%"},children:[e.jsx(k,{children:e.jsx(w,{children:g.orderTableHeads.map((t,n)=>e.jsx(c,{style:g.paymentTableHeadStyle,children:t.label},n))})}),e.jsx(S,{children:(d=r.orders)==null?void 0:d.map(t=>e.jsxs(w,{onClick:()=>a(t.id),className:"cursor-pointer transition duration-200 ease-in-out hover:bg-gray-100",children:[e.jsx(c,{sx:{width:"14%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.referenceNumber}),e.jsx(c,{sx:{width:"14%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.clientUserId?"Registered User":"Guest User"}),e.jsx(c,{style:{width:"16%"},children:t.customerDetails.name}),e.jsx(c,{style:{width:"16%"},children:t.customerDetails.email}),e.jsx(c,{style:{width:"8%"},children:t.netAmount.toLocaleString("en-PH",{style:"currency",currency:"PHP"})}),e.jsx(c,{style:{color:t.orderStatus==="completed"?"green":"red",fontWeight:"bold",width:"8%"},children:t.orderStatus}),e.jsx(c,{style:{width:"12%"},children:new Date(t.createdAt).toLocaleString("en-PH",{dateStyle:"medium",timeStyle:"short"})})]},t.id))})]})}),e.jsx(D,{rowsPerPageOptions:[5,10,25],component:"div",count:r.totalItems,rowsPerPage:s,page:o,onPageChange:i,onRowsPerPageChange:l})]})},K=()=>{const{mutateAsync:r,isPending:a,isError:s,error:o,isSuccess:i}=P({mutationFn:v.outForDelivery});return{outForDelivery:r,isPendingOutForDelivery:a,isErrorOutForDelivery:s,errorOutForDelivery:o,isSuccess:i}},L=()=>{const{mutateAsync:r,isPending:a,isError:s,error:o,isSuccess:i}=P({mutationFn:v.readyForPickup});return{readyForPickup:r,isPendingReadyForPickup:a,isErrorReadyForPickup:s,errorReadyForPickup:o,isSuccess:i}},H=u.lazy(()=>A(()=>import("./ViewOrder-Dfxt7iCV.js"),__vite__mapDeps([0,1,2]))),V=({orderId:r,handleCloseViewOrder:a})=>{const s=R();if(!r)return e.jsx("div",{children:"No order id found!"});const{outForDelivery:o,isPendingOutForDelivery:i,isErrorOutForDelivery:l,errorOutForDelivery:d}=K(),{readyForPickup:t,isPendingReadyForPickup:n,isErrorReadyForPickup:h,errorReadyForPickup:p}=L(),y=async()=>{await o(r),await s.invalidateQueries({queryKey:["order",r]}),await s.invalidateQueries({queryKey:["acceptedOrders"],exact:!1}),await s.invalidateQueries({queryKey:["outForDeliveryOrders"],exact:!1}),await s.invalidateQueries({queryKey:["totalnumberorders"]}),a()},m=async()=>{await t(r),await s.invalidateQueries({queryKey:["order",r]}),await s.invalidateQueries({queryKey:["acceptedOrders"],exact:!1}),await s.invalidateQueries({queryKey:["forpickuporders"],exact:!1}),a()};return e.jsx("div",{children:e.jsx(C,{FallbackComponent:E,children:e.jsx(u.Suspense,{fallback:e.jsx(q,{}),children:e.jsxs(H,{orderId:r,children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(j,{variant:"contained",color:"customblue",onClick:()=>y(),loading:i||n,disabled:i||n,children:"Ready For Delivery"}),e.jsx(j,{variant:"contained",color:"customblue",onClick:()=>m(),loading:i||n,disabled:i||n,children:"Ready For Pickup"})]}),d&&l||h&&p&&e.jsx("p",{className:"text-red-500",children:"Something went wrong, try again or contact the developer"})]})})})})},z=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center",children:[e.jsx(N,{size:48,className:"text-gray-400 mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No Accepted Orders"}),e.jsx("p",{className:"text-gray-500 max-w-sm mb-6",children:"You have no accepted orders at the moment."})]}),G=()=>{const[r,a]=u.useState(0),[s,o]=u.useState(5),[i,l]=u.useState(""),[d,t]=u.useState(!1),n=()=>{t(!1),l("")},h=(x,F)=>{a(F)},p=x=>{o(parseInt(x.target.value,10)),a(0)},{acceptedOrders:y}=_(r,s),m=x=>{l(x),t(!0)};return e.jsxs("div",{children:[y.orders.length===0?e.jsx(z,{}):e.jsx(Q,{acceptedOrders:y,handleViewOrder:m,rowsPerPage:s,page:r,handleChangePage:h,handleChangeRowsPerPage:p}),e.jsx(T,{open:d,onClose:n,style:g.viewOrderModalStyle,children:e.jsx(V,{orderId:i,handleCloseViewOrder:n})})]})};export{G as default};
