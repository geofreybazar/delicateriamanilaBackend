import{G as u,u as d,a as m,b as g,c as x,j as e,N as h,A as p,d as f,r as i,e as j}from"./index-B_SK9RNk.js";import{u as v}from"./useGetLoggedInUser-CY4m8wiR.js";function w(t){return u({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(t)}function N(t){return u({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(t)}const b=()=>{const{mutateAsync:t,isPending:n,isError:o,error:a,isSuccess:s}=d({mutationFn:m.logout});return{logout:t,isPending:n,isError:o,error:a,isSuccess:s}},z=({closeMenu:t})=>{var l;const n=g(),o=x(),{logout:a,isPending:s,error:r}=b(),c=async()=>{await a(),o(f.logout()),n("/login")};return e.jsxs("div",{className:"bg-customOrange absolute right-4 mt-2 rounded-xl w-60 py-2 px-5 shadow-md z-10",children:[e.jsx(h,{to:"/accountsettings",onClick:t,className:`hover:bg-lightCustomOrange w-full flex justify-start rounded-md px-2 ${s?"cursor-not-allowed":"cursor-pointer"}`,children:"Account Settings"}),e.jsx("button",{className:`hover:bg-lightCustomOrange w-full flex justify-start rounded-md px-2 ${s?"cursor-not-allowed":"cursor-pointer"}`,onClick:c,disabled:s,children:s?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin",children:e.jsx(N,{})}),e.jsx("p",{children:"Loging-out"})]}):e.jsx("p",{children:"Logout"})}),r instanceof p&&r.response?e.jsx("p",{className:"text-center capitalize text-red-500",children:((l=r.response.data)==null?void 0:l.error)||"An error occurred"}):r&&e.jsx("p",{className:"text-center capitalize text-red-500",children:"Something went wrong"})]})},k=()=>{const[t,n]=i.useState(!1),o=i.useRef(null);if(!j(r=>r.user.user))return e.jsx("div",{children:"UserId not found!"});const{loggedInUser:s}=v();return i.useEffect(()=>{const r=c=>{o.current&&!o.current.contains(c.target)&&n(!1)};return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[]),e.jsx("div",{className:"relative bg-ashBlack p-4 flex justify-end",children:e.jsxs("div",{ref:o,children:[e.jsxs("div",{className:"bg-customOrange hover:bg-darkCustomOrange py-2 px-4 cursor-pointer rounded-full text-black hover:text-offwhite flex items-center gap-5",onClick:()=>n(!t),children:[e.jsxs("p",{children:[s.firstname," ",s.middlename?s.middlename[0]:""," ",s.lastname," - ",s.role]}),e.jsx("p",{children:e.jsx(w,{})})]}),t&&e.jsx(z,{closeMenu:()=>n(!1)})]})})};export{k as default};
