import{u as p,p as b,g as j,r as P,j as e,h as w,i as v,T as Q,k as f,l as S,m as x,v as E,n as d,o as I,q as C}from"./index-D1os0LSF.js";const T=()=>{const{mutateAsync:n,isPending:t,isError:o,error:i,isSuccess:s}=p({mutationFn:b.incrementProductQuantity});return{incrementProductQuantity:n,isPendingIncrement:t,isErrorIncrement:o,errorIncrement:i,isSuccess:s}},k=()=>{const{mutateAsync:n,isPending:t,isError:o,error:i,isSuccess:s}=p({mutationFn:b.decrementtProductQuantity});return{decrementProductQuantity:n,isPendingDecrement:t,isErrorDecrement:o,errorDecrement:i,isSuccess:s}},q=({data:n})=>{const t=j(),{incrementProductQuantity:o,isPendingIncrement:i,isErrorIncrement:s,errorIncrement:c}=T(),{decrementProductQuantity:y,isPendingDecrement:m,isErrorDecrement:r,errorDecrement:a}=k(),l=async g=>{await o(g),await t.invalidateQueries({queryKey:["products"],exact:!1}),await t.invalidateQueries({queryKey:["product",g]})},h=async g=>{await y(g),await t.invalidateQueries({queryKey:["products"],exact:!1}),await t.invalidateQueries({queryKey:["product",g]})};P.useEffect(()=>{s&&c&&alert(c instanceof Error?c.message:"Something went wrong"),r&&a&&alert(a instanceof Error?a.message:"Something went wrong")},[s,c,r,a]);const u=i||m;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>h(n.id),disabled:u,className:`px-2 p-1 border border-gray-300 rounded-md transition duration-200 ease-in-out ${u?"bg-gray-200 text-gray-400 cursor-not-allowed":"hover:bg-gray-300 cursor-pointer"}`,children:u?"...":"-"}),n.stockQuantity,e.jsx("button",{onClick:()=>l(n.id),disabled:u,className:`px-2 p-1 border border-gray-300 rounded-md transition duration-200 ease-in-out ${u?"bg-gray-200 text-gray-400 cursor-not-allowed":"hover:bg-gray-300 cursor-pointer"}`,children:u?"...":"+"})]})},N=()=>{var m;const[n,t]=P.useState(0),[o,i]=P.useState(5),{products:s}=w(n,o),c=(r,a)=>{t(a)},y=r=>{i(parseInt(r.target.value,10)),t(0)};return s.products.length===0?e.jsx(v,{}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"border border-gray-300 rounded-lg shadow-md",children:e.jsxs(f,{size:"small",children:[e.jsx(S,{children:e.jsx(x,{children:E.inventoryTableHeads.map((r,a)=>e.jsx(d,{style:r.style,children:r.label},a))})}),e.jsx(I,{children:(m=s.products)==null?void 0:m.map(r=>{const a=r.reservedStock.map(l=>l.quantity).reduce((l,h)=>l+h,0);return e.jsxs(x,{className:"cursor-pointer transition duration-200 ease-in-out hover:bg-gray-100",children:[e.jsx(d,{children:r.name}),e.jsx(d,{children:r.status}),e.jsx(d,{children:e.jsx(q,{data:r})}),e.jsx(d,{children:a}),e.jsx(d,{children:r.category.name})]},r.id)})})]})}),e.jsx(C,{rowsPerPageOptions:[5,10,25],component:"div",count:s.totalItems,rowsPerPage:o,page:n,onPageChange:c,onRowsPerPageChange:y})]})};export{N as default};
